{% extends 'base.html.twig' %}

{% block title %}Hello Sae23Controller!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
   <center><h1>{{article['nom']}}</h1></center>
   <img src="/{{article['image']}}" width="50%" style="float:left;">
   <form action="/sae23/achatform" method="post" width="50%" style="float:right;">
   <input type="hidden" id="prixs" name="prixs" value="{{article['prix']}}">
   <input type="hidden" id="articlel" name="articleid" value="{{article['id']}}">
	<div class="form-group">
		<label class="col-form-label mt-4" for="prixpc">Prix Pc : {{article['prix']}}€</label>
	</div>

	<div class="form-group">
      <label for="pcgarantie" class="form-label mt-4">{{prestations[0]['nom']}}</label>
		<div class="form-check">
        <input class="form-check-input" type="checkbox" value="1" name="garantie" id="garantiecheck">
        <label class="form-check-label" for="flexCheckDefault">
          {{prestations[0]['prix']}}€
        </label>
      </div>
    </div>
	<div class="form-group">
      <label for="pccadeaux" class="form-label mt-4">{{prestations[1]['nom']}}</label>
		<div class="form-check">
        <input class="form-check-input" type="checkbox" value="1" name="cadeau" id="cadeaucheck">
        <label class="form-check-label" for="flexCheckDefault">
          {{prestations[1]['prix']}}€
        </label>
    </div>
  </div>
  <div class="form-group">
      <label for="pcenvoierapide" class="form-label mt-4">{{prestations[2]['nom']}}</label>
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="1" name="envoierapide" id="envoierapidecheck">
        <label class="form-check-label" for="flexCheckDefault">
          {{prestations[2]['prix']}}€
        </label>
    </div>
  </div>
  <div class="form-group">
      <label for="prixtotal" class="form-label mt-4" id="prixl">Prix : {{article['prix']}}€</label>
  </div>
  <button type="submit" class="btn btn-primary">Acheter</button>
   </form>
</div>

<script>
  var prixx = parseInt(document.getElementById("prixs").value);
  const garantie = document.getElementById("garantiecheck");
  const cadeau = document.getElementById("cadeaucheck");
  const envoierapide = document.getElementById("envoierapidecheck");
  const prixl = document.getElementById("prixl");
  const prixs = document.getElementById("prixs");

  garantie.addEventListener('change', (event) => {
    if (event.currentTarget.checked) {
      prixx = prixx + 50;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }else {
      prixx = prixx - 50;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }
  })

  cadeau.addEventListener('change', (event) => {
    if (event.currentTarget.checked) {
      prixx = prixx + 10;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }else {
      prixx = prixx - 10;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }
  })

  envoierapide.addEventListener('change', (event) => {
    if (event.currentTarget.checked) {
      prixx = prixx + 15;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }else {
      prixx = prixx - 15;
      prixs.value = prixx;
      prixl.innerHTML = "Prix : " + prixx + "€";
    }
  })

</script>

{% endblock %}
